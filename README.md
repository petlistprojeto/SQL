# SQL
-- ----------------------------------------------------- -- Schema mydb -- ----------------------------------------------------- CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ; USE `mydb` ; -- ----------------------------------------------------- -- Table `mydb`.`Agendamentos` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Agendamentos` (   `idAgendamento` INT NOT NULL,   `Data_agendada` DATE NULL,   `Horario_agendado` TIME NULL,   `FK_endereco_agenda` INT NOT NULL,   `FK_Parceiro_agenda` INT NOT NULL,   `FK_Cliente_agenda` INT NOT NULL,   PRIMARY KEY (`idAgendamento`),   INDEX `fk_Agendamento_endereco1_idx` (`FK_endereco_agenda` ASC) VISIBLE,   INDEX `fk_Agendamento_Parceiros1_idx` (`FK_Parceiro_agenda` ASC) VISIBLE,   INDEX `fk_Agendamento_Cliente1_idx` (`FK_Cliente_agenda` ASC) VISIBLE,   CONSTRAINT `fk_Agendamento_endereco1`     FOREIGN KEY (`FK_endereco_agenda`)     REFERENCES `mydb`.`enderecos` (`idEndereco`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Agendamento_Parceiros1`     FOREIGN KEY (`FK_Parceiro_agenda`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Agendamento_Cliente1`     FOREIGN KEY (`FK_Cliente_agenda`)     REFERENCES `mydb`.`Clientes` (`idCliente`)     ON DELETE NO ACTION     ON UPDATE NO ACTION) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Clientes` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Clientes` (   `idCliente` INT NOT NULL,   `Cpf` VARCHAR(15) NOT NULL,   `Rg` VARCHAR(45) NOT NULL,   `E-mail` VARCHAR(45) NOT NULL,   `Telefone` INT(15) NOT NULL,   `foto_cliente` VARCHAR(255) NULL,   `FK_endereco_cliente` INT NOT NULL,   PRIMARY KEY (`idCliente`),   INDEX `fk_Cliente_endereco1_idx` (`FK_endereco_cliente` ASC) VISIBLE,   CONSTRAINT `fk_Cliente_endereco1`     FOREIGN KEY (`FK_endereco_cliente`)     REFERENCES `mydb`.`enderecos` (`idEndereco`)     ON DELETE NO ACTION     ON UPDATE NO ACTION) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Itens_ranking` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Itens_ranking` (   `id_item_ranking` INT NOT NULL,   `nota_vendedor_para_cliente` FLOAT NULL,   `nota_comprador_para_parceiro` FLOAT NULL,   `Vendas_idVenda` INT NOT NULL,   `Clientes_idCliente` INT NOT NULL,   `Parceiros_idParceiro` INT NOT NULL,   `data_atualizacao` DATETIME NULL,   PRIMARY KEY (`id_item_ranking`),   INDEX `fk_Itens_ranking_Vendas1_idx` (`Vendas_idVenda` ASC) VISIBLE,   INDEX `fk_Itens_ranking_Clientes1_idx` (`Clientes_idCliente` ASC) VISIBLE,   INDEX `fk_Itens_ranking_Parceiros1_idx` (`Parceiros_idParceiro` ASC) VISIBLE,   CONSTRAINT `fk_Itens_ranking_Vendas1`     FOREIGN KEY (`Vendas_idVenda`)     REFERENCES `mydb`.`Vendas` (`idVenda`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Itens_ranking_Clientes1`     FOREIGN KEY (`Clientes_idCliente`)     REFERENCES `mydb`.`Clientes` (`idCliente`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Itens_ranking_Parceiros1`     FOREIGN KEY (`Parceiros_idParceiro`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION); -- ----------------------------------------------------- -- Table `mydb`.`Itens_venda` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Itens_venda` (   `id_item_venda` INT NOT NULL,   `FK_Venda` INT NOT NULL,   `Produtos_idProduto` INT NULL,   `Servicos_idServico` INT NULL,   `qtde_item` INT NOT NULL,   `valor_parcial_item` DECIMAL NOT NULL,   PRIMARY KEY (`id_item_venda`),   INDEX `fk_Itens_venda_Vendas1_idx` (`FK_Venda` ASC) VISIBLE,   INDEX `fk_Itens_venda_Produtos1_idx` (`Produtos_idProduto` ASC) VISIBLE,   INDEX `fk_Itens_venda_Servicos1_idx` (`Servicos_idServico` ASC) VISIBLE,   CONSTRAINT `fk_Itens_venda_Vendas1`     FOREIGN KEY (`FK_Venda`)     REFERENCES `mydb`.`Vendas` (`idVenda`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Itens_venda_Produtos1`     FOREIGN KEY (`Produtos_idProduto`)     REFERENCES `mydb`.`Produtos` (`idProduto`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Itens_venda_Servicos1`     FOREIGN KEY (`Servicos_idServico`)     REFERENCES `mydb`.`Servicos` (`idServico`)     ON DELETE NO ACTION     ON UPDATE NO ACTION); -- ----------------------------------------------------- -- Table `mydb`.`Pagamentos` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Pagamentos` (   `idPagto` INT NOT NULL,   `data_pagto` DATE NOT NULL,   `hora_pagto` TIME NOT NULL,   `valor_pagto` DECIMAL NOT NULL,   `codigo_autorizacao` INT NULL,   PRIMARY KEY (`idPagto`)) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Parceiros` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Parceiros` (   `idParceiro` INT NOT NULL,   `FK_tipo_parceiro` INT NOT NULL,   `Cnpj_cpf` INT NOT NULL,   `Crmv` INT NULL,   `Nome_parceiro` VARCHAR(200) NOT NULL,   `RG` VARCHAR(45) NULL,   `Email` VARCHAR(45) NOT NULL,   `Telefone` INT(15) NOT NULL,   `foto_parceiro` VARCHAR(255) NULL,   `FK_endereco_parceiro` INT NOT NULL,   PRIMARY KEY (`idParceiro`),   INDEX `fk_Parceiros_Tipo_Parceiros_idx` (`FK_tipo_parceiro` ASC) VISIBLE,   INDEX `fk_Parceiros_endereco1_idx` (`FK_endereco_parceiro` ASC) VISIBLE,   CONSTRAINT `fk_Parceiros_Tipo_Parceiros`     FOREIGN KEY (`FK_tipo_parceiro`)     REFERENCES `mydb`.`Tipo_Parceiros` (`id_tipo_parceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Parceiros_endereco1`     FOREIGN KEY (`FK_endereco_parceiro`)     REFERENCES `mydb`.`enderecos` (`idEndereco`)     ON DELETE NO ACTION     ON UPDATE NO ACTION) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Produtos` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Produtos` (   `idProduto` INT NOT NULL,   `descricao_produto` VARCHAR(45) NULL,   `preco_produto` DECIMAL NULL,   `quantidade_estoque` INT NULL,   `FK_parceiro_produto` INT NOT NULL,   PRIMARY KEY (`idProduto`),   INDEX `fk_Servicos_Parceiros1_idx` (`FK_parceiro_produto` ASC) VISIBLE,   CONSTRAINT `fk_Servicos_Parceiros10`     FOREIGN KEY (`FK_parceiro_produto`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Ranking` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Ranking` (   `idNota` INT NOT NULL,   `nota_ranking` FLOAT NOT NULL,   `FK_Cliente_rank` INT NULL,   `FK_Parceiro_rank` INT NULL,   PRIMARY KEY (`idNota`),   INDEX `fk_Ranking_Clientes1_idx` (`FK_Cliente_rank` ASC) VISIBLE,   INDEX `fk_Ranking_Parceiros1_idx` (`FK_Parceiro_rank` ASC) VISIBLE,   CONSTRAINT `fk_Ranking_Clientes1`     FOREIGN KEY (`FK_Cliente_rank`)     REFERENCES `mydb`.`Clientes` (`idCliente`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Ranking_Parceiros1`     FOREIGN KEY (`FK_Parceiro_rank`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION); -- ----------------------------------------------------- -- Table `mydb`.`Servicos` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Servicos` (   `idServico` INT NOT NULL,   `descricao_servico` VARCHAR(45) NULL,   `preco_servico` DECIMAL NULL,   `FK_parceiro_servico` INT NOT NULL,   PRIMARY KEY (`idServico`),   INDEX `fk_Servicos_Parceiros1_idx` (`FK_parceiro_servico` ASC) VISIBLE,   CONSTRAINT `fk_Servicos_Parceiros1`     FOREIGN KEY (`FK_parceiro_servico`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION) ENGINE = InnoDB; -- ----------------------------------------------------- -- Table `mydb`.`Tipo_Parceiros` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_Parceiros` (   `id_tipo_parceiro` INT NOT NULL,   `descricao` VARCHAR(255) NOT NULL,   PRIMARY KEY (`id_tipo_parceiro`)); -- ----------------------------------------------------- -- Table `mydb`.`Vendas` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`Vendas` (   `idVenda` INT NOT NULL,   `data_venda` DATE NOT NULL,   `hora_venda` TIME NOT NULL,   `valor_total_venda` DECIMAL NULL,   `FK_Parceiro_venda` INT NOT NULL,   `FK_Cliente_venda` INT NOT NULL,   `FK_Pagto_venda` INT NOT NULL,   PRIMARY KEY (`idVenda`),   INDEX `fk_Vendas_Parceiros1_idx` (`FK_Parceiro_venda` ASC) VISIBLE,   INDEX `fk_Vendas_Clientes1_idx` (`FK_Cliente_venda` ASC) VISIBLE,   INDEX `fk_Vendas_Pagamentos1_idx` (`FK_Pagto_venda` ASC) VISIBLE,   CONSTRAINT `fk_Vendas_Parceiros1`     FOREIGN KEY (`FK_Parceiro_venda`)     REFERENCES `mydb`.`Parceiros` (`idParceiro`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Vendas_Clientes1`     FOREIGN KEY (`FK_Cliente_venda`)     REFERENCES `mydb`.`Clientes` (`idCliente`)     ON DELETE NO ACTION     ON UPDATE NO ACTION,   CONSTRAINT `fk_Vendas_Pagamentos1`     FOREIGN KEY (`FK_Pagto_venda`)     REFERENCES `mydb`.`Pagamentos` (`idPagto`)     ON DELETE NO ACTION     ON UPDATE NO ACTION); -- ----------------------------------------------------- -- Table `mydb`.`enderecos` -- ----------------------------------------------------- CREATE TABLE IF NOT EXISTS `mydb`.`enderecos` (   `idEndereco` INT NOT NULL,   `logradouro` VARCHAR(255) NOT NULL,   `numero` INT NULL,   `complemento` VARCHAR(45) NULL,   `bairro` VARCHAR(45) NULL,   `cidade` VARCHAR(45) NOT NULL,   `UF` VARCHAR(2) NOT NULL,   `CEP` INT NOT NULL,   PRIMARY KEY (`idEndereco`));
